"0","product_based_recommendations <- function(customer, product_similarities, bought_products){"
"0","  "
"0","  # turn into character if not already"
"0","  customer <- ifelse(is.character(customer),customer,as.character(customer))"
"0","  "
"0","  # get scores"
"0","  customer_bought <- row.names(product_similarities)[bought_products[,customer] == TRUE]"
"0","  customer_scores <- tibble(product = row.names(product_similarities), "
"0","                        score = apply(data.frame(product_similarities[,customer_bought]),1,sum),"
"0","                        bought = bought_products[,customer])"
"0","  # sort unseen movies by score and remove the 'seen' column"
"0","  customer_recom <- customer_scores %>% filter(bought == 0) %>% arrange(desc(score)) %>% select(-bought)"
"0","  return(customer_recom)"
"0","  "
"0","}"
"0","product_based_recommendations(""411"", product_similarities1, products_customers_wide)"
